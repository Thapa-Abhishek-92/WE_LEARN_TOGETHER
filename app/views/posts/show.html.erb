<% content_for :title, "投稿詳細" %>

<div class="mx-auto max-w-screen-xl px-4 py-8">
  <section class="mx-auto max-w-3xl space-y-8">
    <header class="flex items-start justify-between gap-4">
      <div>
        <h1 class="text-2xl md:text-3xl font-bold tracking-tight"><%= @post.title %></h1>
        <p class="mt-2 text-sm text-gray-500">
          <span class="font-medium text-gray-600">学習場面：</span><%= @post.situation %>
          <span class="mx-2 text-gray-300">|</span>
          <time datetime="<%= @post.created_at.iso8601 %>"><%= l(@post.created_at, format: :long) %></time>
        </p>
      </div>

      <div class="shrink-0 flex gap-2">
        <% if user_signed_in? %>
          <%= link_to "編集", edit_post_path(@post),
                class: "inline-flex items-center rounded-md border border-gray-300 px-4 py-2 text-sm text-gray-700 bg-white hover:bg-gray-50" %>

          <% unless Rails.env.production? %>
            <%= button_to "削除", post_path(@post),
                  method: :delete,
                  form: { data: { turbo_confirm: "本当に削除しますか？" } },
                  class: "inline-flex items-center rounded-md bg-red-600 px-4 py-2 text-sm text-white hover:bg-red-700" %>
          <% end %>
        <% end %>

        <%= link_to "一覧に戻る", posts_path,
              class: "inline-flex items-center rounded-md border border-gray-300 px-4 py-2 text-sm text-gray-700 bg-white hover:bg-gray-50" %>
      </div>
    </header>

    <article class="rounded-2xl border bg-white p-6 md:p-8 shadow-sm">
      <div class="prose max-w-none leading-relaxed text-gray-800">
        <%= simple_format(@post.content) %>
      </div>
    </article>
  </section>
</div>
